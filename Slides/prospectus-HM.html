<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Tax evasion and productivity</title>
    <meta charset="utf-8" />
    <meta name="author" content="Hans Martinez" />
    <meta name="author" content="Navarro, Rivers, Aguiar" />
    <script src="prospectus-HM_files/header-attrs/header-attrs.js"></script>
    <script src="prospectus-HM_files/kePrint/kePrint.js"></script>
    <link href="prospectus-HM_files/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="mycss.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Tax evasion and productivity
### Hans Martinez
### Navarro, Rivers, Aguiar

---






count: false
name: motivation
### Motivation and research question

- Tax evasion has **not been satisfactorily** addressed in Prod. Fun. estimation

  - Tax evasion is **widespread** .small[(Slemrod, 2019) [&amp;#9654; Stats](#tax-stats)]
  - Not classical measurement error .small[correlated with the firm's characteristics; not mean zero]

--
count: false
- Ignoring tax evasion leads to **biased** estimates of **productivity**
  - Intuition: lower reported profits &amp;#9654; lower measured productivity

--
count: false
- New estimation strategy to recover **productivity and tax evasion**
--
count: false
  - Tax evasion through **overreporting of inputs** by fake invoices

???

- Tax evasion is often Treated as a classical measurement error .small[(e.g., Blalock et al., 2004, p.204)]

- Measuring tax evasion is a **non-trivial** problem due to firm's incentives to conceal their behavior

- Intuitively, the fewer inputs the firm utilizes to produce output the more productive it is. Tax evasion incentivizes firms to underreport revenues/overreport inputs. Both make firms appear less productive
  

---
name: over-r
### Input overreporting by fake invoices

- Recent empirical evidence from Ecuador suggests more **relevant** than we thought .small[[&amp;#9654; (Carrillo et al. 2022)](#carrillo)]

  - Quantitatively large .small[Up to 14% of a firm's annual purchases]
  - Not unique to small firms .small[larger firms actively overreport inputs]
  - Firms at the top of the size distribution do not evade by overreporting

--
count: false
- **International** problem

  - OECD acknowledges fake invoicing pervasiveness .small[(OECD, 2017)]
  - Mexico .small[(Tax revenue loss 0.3% Mexico's GDP)], Colombia .small[(0.2%)], Chile .small[(0.2%)], Poland .small[(5.6%)], Asia .small[(South Korea and China)], and Africa .small[(Kenya and Rwanda)] 

--
count: false
- Largely **overlooked** by the literature .small[Most studies focus on revenue underreporting]

???

How do I solve my question?

- Recent empirical evidence about firm's evasion decisions 
- Structural approach leveraging from firm's optimal behavior
- Recent (and old) developments in the econometrics of unobservables 

---
### Why does it matter?

- Production function estimation
  
  - Productivity bias due to tax evasion .small[Proxy var (Gandhi, Navarro, and Rivers, 2020 [GNR]; Ackerberg, Caves, Frazer, 2015 [ACF])]
--
count: false
  - Wider dispersion (ranking is preserved?)  .small[Productivity gap (Syverson, 2011)]
--
count: false
  - Systematic overreporting of intermediate inputs .small[Measurement error on capital (Collard et al., 2020; Ursenbach's JMP)]

--
count: false
name: lit
- Tax evasion: .small[[&amp;#9654; Lit conventions](#tax-conv) [&amp;#9654; Lit Overview](#tax-stats)]
  - Estimates using commonly available data .small[[&amp;#9654; Traces of income](#traces) (Pissarides and Weber, 1989; Artavanis, 2016; Paulus, 2015; Dunbar and Fu, 2015)]
  - Through cost overreporting: .small[[&amp;#9654; Corporate tax evasion: ](#firms-evasion) (Zumaya et al., 2021; Carrillo et al., 2022]


???

- Econometrics of unobservables .small[(Hu,2022; Hu, Schennach, Shiu, 2022; Hu and Yao, 2022; Hu and Schennach, 2008)]

**Contribution**

- Production function .small[(Gandhi, Navarro, and Rivers , 2020 [GNR]; Ackerberg, Caves, Frazer , 2015 [ACF])]
  - Systematic overreporting of intermediate inputs .small[(Measurement error on capital: Collard et al., 2020; Ursenbach's JMP)]

- Tax evasion: .small[[&amp;#9654; Lit conventions](#tax-conv) [&amp;#9654; Lit Overview](#tax-stats)]
  - Estimates of corporate tax evasion using commonly available data .small[([&amp;#9654; Traces of income:](#traces) Pissarides and Weber, 1989; Artavanis, 2016; Paulus, 2015; Dunbar and Fu, 2015); [&amp;#9654; Corporate tax evasion: ](#firms-evasion) Zumaya et al., 2021; [&amp;#9654; Carrillo et al., 2022](#cost-over))]

- Econometrics of unobservables .small[(Hu,2022; Hu, Schennach, Shiu, 2022; Hu and Yao, 2022; Hu and Schennach, 2008)]

- Corporate tax evasion by cost overreporting: Widespread and quantitatively important but largely understudied, mainly due to lack of data; until recently

Traces of income: Researchers recover the true income of evaders by comparing an observable measure of true income between evaders and non-evaders.

Pissarides and Weber (1989): Authors assume food consumption is a function of income but not of kind of income. A higher ratio of food purchases to reported income of the self-employed (vs employees) implies the self-employed understate their income.

Systematic overreporting -&gt; Economics of firms decision on tax evasion

Intermetiate inputs -&gt; flexible input assumption on productivity

- Ignoring tax evasion in **production function** estimation leads to :
  1. biased estimates of the production function parameters
  2. biased estimates of productivity
  3. a reshuffling of firms in the productivity distribution
  - Intuitively, the fewer inputs the firm utilizes to produce output the more productive it is. Tax evasion incentivizes firms to underreport revenues/overreport inputs. Both make firms appear less productive

- Any attempt to estimate **tax evasion** at the firm level should account for productivity
  - Intuitively, tax evasion is the difference between reported and true profits. True profits depend on productivity


---
layout: false
### What do I plan to do?

1. Derive a method to estimate **productivity** and **tax evasion**
   
--
count: false
1. Implement the method using **data** from developing countries 
--
count: false
1. Contrast the **productivity distribution** with the mismeasured one .small[Magnitude of the bias, dispersion of the distribution, and ranking]
   
--
count: false
1. Compare estimates of **tax evasion** with previous studies

--
count: false
1. Study the **policy** implications
  - **efficient reallocation** of resources from low- to high-productivity firms .small[(Eslava et al., 2004; Levy, 2018)]
  - **efficient targeting** to improve government tax revenue


---
layout: false
count: false
### What do I plan to do?

1. Derive a method to estimate **productivity** and **tax evasion** &amp;#9989;
   
2. Implement the method using **data** from developing countries &amp;#9997;

3. Contrast the **productivity distribution** with the mismeasured one &amp;#10071;
   
4. Compare estimates of **tax evasion** with previous studies &amp;#10071;

5. Study the **policy** implications &amp;#10071;


---
layout: false
### The setting

- We observe output `\(Y_{it}\)`, reported inputs `\(X_{it}\)`, and prices `\(P_t\)`. 

`\(\mathcal O = \{Y_{it}, X_{it}, P_{t}\}_{i\in I, t \in T}\)`
  
- We want to estimate the production function (PF) and productivity `\(\omega_{it}\)`, allowing for classical measurement error `\(\varepsilon^Y_{it}\)`

`\(Y_{it}=G(X^*_{it})e^{\omega_{it}+\varepsilon^Y_{it}}\)`

- Firms' reported inputs are their true inputs `\(X^*\)` inflated by `\(e^{\varepsilon^Y_{it}}\)` to evade taxes

`\(X_{it}=X^*_{it}e^{\varepsilon^X_{it}}\)` with `\(\varepsilon_{it}^X\ge0\)` and `\(\varepsilon_{it}^X\not\perp X^*\)` .small[ [&amp;#9654; microfoundation](#model)]



---
name: bias
### Productivity bias

- The difference between
  
- the productivity naively estimated in the presence of tax evasion `\(\tilde\omega_{it}\)` and 

- true productivity `\(\omega_{it}\)`

`\begin{equation}
 \mathbb{E}[\tilde\omega_{it}|x]-
    \mathbb{E}[\omega_{it}|x] \le
      \ln\mathbb{E}\left[
        \frac{G(X^*_{it})}{G(X^*_{it}e^{\varepsilon^X_{it}})}|x\right] \le 0
\end{equation}`

  By Jensen's inequality and `\(G(\cdot)\)` is monotonically increasing

.footer[ [&amp;#9654; Bias in PF parameters](#prd-bias)]



---
layout: true
name: id-strat
### Identification strategy
---

- Data: 
  - Tax records data: Percentile of the size distribution for non-evading firms
  - Firm-level data: Inputs, outputs, and prices
  
- Assumptions: .small[[&amp;#9654; Empirical evidence](#evidence)]
  - (A-1) Firms at the top of the size distribution do not evade by overreporting inputs 
  - (A-2) Overreporting is chosen after productivity shock is realized and true inputs are chosen but before the current-period shock


.footer[[&amp;#9654; Other potential sources of identification](#id-sources)]

---
layout: false
name: gnr
### GNR

1st Stage

`\begin{align*}
    \ln\left(\frac{\rho_t X^*_{it}}{P_{t}Y_{it}}\right)+\varepsilon^X_{it}&amp;=\ln\beta - \varepsilon^Y_{it} \\
    \mathbb{E}\left[\ln\left(\frac{\rho_t X^*_{it}}{P_{t}Y_{it}}\right)| S_{it}&gt;s\right]&amp;=\ln\beta \; &amp;\text{(A-1)}
\end{align*}`

It works because `\(\mathbb{E}[\varepsilon^Y_{it}|S_{it}&gt;s]=\mathbb{E}[\varepsilon^Y_{it}]=0\)`

.footer[[&amp;#9654; ACF breaks](#acf)]


---
### GNR's 2nd stage might fail

Can only evaluate for `\(S_{it}&gt;s\)`

`\begin{align}
    \mathcal Y_{it}&amp;\equiv \ln Y_{it}-\varepsilon^Y_{it}-\beta \ln X_{it}\\
    &amp;= \omega_{it}\;&amp;\text{(A-1)}\\
    \\
    \mathbb{E}[\mathcal Y_{it}|\mathcal Y_{it-1},S_{it}&gt;s] &amp;= \mathbb{E}[\omega_{it}|\omega_{it-1},S_{it}&gt;s] 
\end{align}`

However, it will not work because of selection on `\(S\)`, i.e., `\(\mathbb{E}[\omega_{it}|S_{it}&gt;s]\not=\mathbb{E}[\omega_{it}]\)`

---
### Proposed solution

However, for every firm, I can form

`\begin{align}
    \mathcal E_{it}\equiv&amp;\ln\left(\frac{\rho_t X_{it}}{P_{t}Y_{it}}\right)-\ln\beta\\
    &amp;=\ln\left(\frac{\rho_tX^*_{it}}{P_{t}Y_{it}}\right)-\ln\beta+\varepsilon^X_{it}\\
    &amp;=-\varepsilon^Y_{it} +\varepsilon^X_{it}
\end{align}`

---
### Trading unobservables

Likewise,

`\begin{align}
    \mathcal X_{it}&amp;\equiv \ln X_{it}-\mathcal E_{it}\\
    &amp; = \ln X^*_{it} +\varepsilon^X_{it}-(\varepsilon^X_{it}- \varepsilon^Y_{it})\\
    &amp; = \ln X^*_{it} + \varepsilon^Y_{it}\\
    \\
    \mathcal W_{it} &amp; \equiv \ln Y_{it} - \beta\mathcal X_{it}\\
    &amp; = \beta\ln X^*_{it}+\omega_{it}+\varepsilon^Y_{it}-\beta\ln X^*_{it}-\beta\varepsilon^Y_{it} \\
    &amp; = \omega_{it}+(1-\beta)\varepsilon^Y_{it}
\end{align}`

---
### Markov process of productivity

I can now recover `\(\delta=[\delta_0,\delta_1]'\)`

`\begin{align}
  \mathbb{E}[\mathcal W_{it}|\mathcal W_{it-1}]&amp;=\\
  \mathbb{E}[\omega_{it}|\mathcal W_{it-1}]&amp;=\delta_0+\delta_1\mathbb{E}[\omega_{it-1}+(1-\beta)\varepsilon^Y_{it-1}|\mathcal W_{it-1}]-\mathbb{E}[(1-\beta)\varepsilon^Y_{it}|\mathcal W_{it-1}]\\
  &amp;=\delta_0+\delta_1\mathbb{E}[\omega_{it-1}|\mathcal W_{it-1}]
\end{align}`


---
name: deconv
### Using deconvolution

I can get all the moments of the true inputs `\(X^*_{it}\)`, productivity `\(\omega_{it}\)`, and tax evasion `\(\varepsilon^X_{it}\)` distributions at every `\(t\in T\)`

because `\(Var[\varepsilon^Y_{it}|S_{it}&gt;s]=Var[\varepsilon^Y_{it}|t]=Var[\varepsilon^Y_{it}]\)`

`\begin{align}
  \mathbb{E}[\mathcal E_{it}]&amp;=\mathbb{E}[\varepsilon^X_{it}]-\mathbb{E}[\varepsilon^Y_{it}]\\
  &amp;=\mathbb{E}[\varepsilon^X_{it}] \\
  \\
  Var[\mathcal E_{it}]&amp;=Var[\varepsilon^X_{it}-\varepsilon^Y_{it}]\\
  &amp;=Var[\varepsilon^X_{it}]+Var[\varepsilon^Y_{it}] \;&amp;\text{(A-2)}\\
\end{align}`


---
### Using deconvolution

Note: I don't need (A-2) for true inputs `\(X^*_{it}\)` and productivity `\(\omega_{it}\)` distributions

`\begin{align}
  \mathbb{E}[\mathcal{X}_{it}]&amp;=\mathbb{E}[\ln X^*_{it}]+\mathbb{E}[\varepsilon^Y_{it}]\\
  &amp;=\mathbb{E}[\ln X^*_{it}] \\
  \\
  Var[\mathcal{X}_{it}]&amp;=Var[\ln X^*_{it}]+Var[\varepsilon^Y_{it}]\\
\end{align}`

.footer[[&amp;#9654; Using instruments](#gnr-iv) [&amp;#9654; Using second moments](#sec-mom)]

---
name: data1
layout: false
### Data

1. Firm's tax records (transaction level)
  - Mexico and Ecuador

2. Firm-level data (output, inputs, prices)
  - Mexico, Ecuador, Colombia, and Chile


.footer[[&amp;#9654; Sum-stats](#sum-stats) [&amp;#9654; Access](#data-slide)]


---
layout: false
name: future
### Future work

- MC simulations .small[[&amp;#9654; preliminary](#mc-sim)]
  
- Estimate using real data
  
- Use Hu, Schennach, Shiu (2022) framework .small[[&amp;#9654; preview](#hu-sch)] 
  
  - To allow for non-linear production functions
  - To allow for misreporting of prices
  


---
### Thesis outline


- Stochastic Revealed Profit-Maximization
  - S-Cournout Rationalizability (Summer paper)
  - Bertrand competition and multiproduct firms
  - Non-parametric stochastic test of Market Power and
  - Non-parametric bounds for markups
  
- The immigrant job market and productivity losses in Canada
- Market shares or profits: Complementarity and durability in the big appliances market


---
name: final_slide
count: false
layout: false
class: center middle 

[hansmartinez.com](hansmartinez.com)

&lt;img src="prospectus-HM_files/figure-html/unnamed-chunk-1-1.png" width="90%" /&gt;

.small[ Download slides: Scan QR with your phone's camera ]

&lt;!-- .center[Link to slides: Scan me!] --&gt;
&lt;!-- .footer[ .full-width[Hello there]] --&gt;

---
class: inverse center middle
count: false

## Appendix

---
layout: true
count: false

---

&gt; **Identification assumption** : larger firms do not overreport inputs. 

- Costlier to keep the double accounting, higher probability to be denounced to the authority, and access to other legal tools to reduce their tax liabilities.
- Evidence from tax evasion literature: Small and medium size firms .small[Slemrod, 2019]

Let `\(L(X^*_{it},S_i)=\tau [\Pi(X^*_{it})-\Pi(X_{it})]-C(X_{it}-X^*_{it},S_{i})\)`. Therefore, for large firms `\(S_i=s\)`.

`$$\begin{equation}\label{eq:l_ic}
 \mathbb{E}[L(X^*_{it},S_i)|X^*_{it},S_{i}=s]=0
\end{equation}$$`

---
layout: true
count: false
### Estimation strategy

---
count: false

Recovering the joint distribution `\(f(y_{it},x_{it},p_{t},s_i)=f(y_{it},x_{it},x^*_{it},p_{t},\omega_{it},\omega_{it-1},s_i)\)` from the data `\(\mathcal{O}=\{Y_{it},X_{it},P_{t},S_{i}\}_{i\in I, t \in T}\)`.

Assumptions: 
1. `\(f_1(y_{it}|x_{it}, x_{it}^*,\omega_{it},\omega_{it-1}, s_{i}, p_{t})=f_1(y_{it}|x_{it}^*,\omega_{it})\)`
1. `\(f_2(p_{t}|x_{it}, x_{it}^*,\omega_{it},\omega_{it-1}, s_{i})=f_2(p_{t}|x_{it}^*)\)`
1. `\(f_3(\omega_{it}|x_{it}, x_{it}^*,\omega_{it-1}, s_{i}, p_{t})=f_3(\omega_{it},|\omega_{it-1})\)`
1. `\(f_4(x_{it}|x_{it}^*,\omega_{it},\omega_{it-1}, s_{i}, p_{t})=f_4(x_{it}|x_{it}^*,s_{i})\)`

---
count: false

Recast joint distribution as

`$$\begin{aligned}
 f&amp;(y_{it},x_{it},p_{t},s_i)\\
 &amp;= f(y_{it},x_{it},p_{t},\omega_{it},\omega_{it-1},x^*_{it},s_i) \\ \notag
 &amp;= f_1(y_{it}| x^*_{it},\omega_{it})
 f_2(p_{it}|x^*_{it},\omega_{it})
 f_3(\omega_{it}|\omega_{it-1})
 f_4(x_{it}|x^*_{it},s_i)
 f(\omega_{it-1})f(x_{it}^*,s_i) \notag
\end{aligned}$$`

---
count: false

Assuming `\(f(y_{it},x_{it},p_{t},s_i)\)` is time invariant, we can form the quasi likelihood function as follows:

`$$\begin{equation*}
 \label{eq:mle_def}
 \sum_{i\in I}\left(
 \sum_{t\in T} \log f(y_{it},x_{it},p_{t},s_i)
 \right) \equiv
 \sum_{i\in I} l(D_i;\alpha)
\end{equation*}$$`

in which `\(D_i=(Y_{it},X_{it},P_{t},S_{i})\)` and

---
count: false

`$$\begin{aligned} \label{eq:mle}
 l(D_i:\alpha) &amp;\equiv l(D_i;\theta, f_1,f_2,f_3,f_4)\notag\\
 &amp;= \sum_{t\in T}\log \bigg\{ 
 \int f_1(y_{it} - g(x^*_{it})+\omega_{it}) \\
 &amp; f_2\left(-\ln\left(\frac{\rho_t X^*_{it}}{P_{t}Y_{it}}\right)+\ln\left(\frac{G_x(x^*_{it})X^*_{it}}{G(x^*_{it})}\right)\right)\\
 &amp; f_3(\omega_{it}-h(\omega_{it-1})) \\
 &amp; f_4(0|s_{i})^{\mathbb 1 [L(x^*_{it},s_i)\ge 0]}
 f_4(x_{it}-x^*_{it}|s_{i})^{\mathbb 1 [L(x^*_{it},s_i) &lt; 0]}dx^* \bigg\} \\
 &amp; + \sum_{t\in T}\log f(\omega_{it-1})f(x_{it}^*,s_i)
\end{aligned}$$`

---
layout: false
count: false
name: sum-stats

&lt;!-- ![](tax_t.png){width="50%"} --&gt;

&lt;img src="figures/tax_t.png" width="75%" style="display: block; margin: auto;" /&gt;


---

![](figures/eaim.png)

---

![](figures/colombia.png)

.footer[[&amp;#9664; Back](#data-slide)]


---


&lt;img src="figures/tax_dens_notrim.png" width="50%" style="display: block; margin: auto;" /&gt;

---

&lt;img src="figures/tax_dens_over.png" width="50%" style="display: block; margin: auto;" /&gt;

.footer[[&amp;#9664; Back](#data1)]

---
name: tax-conv

### Brief tax evasion literature overview

Conventions in the literature .small[(Slemrod, 2019)]:
- Tax avoidance: Legal actions to reduce tax liability
- Tax evasion: Illegal actions to reduce tax liability
- Informality: Small-scale economic activities unobserved by official authorities

.footer[[&amp;#9664; Back](#lit)]


---
name: tax-stats
### What do they do in the tax evasion lit?

- Random audits
  - Tax gap: US, 18.3% overall; UK, 6.4% overall, 6.4% corporate income, 5 % individual, 11.1% VAT; Denmark, 2.2 % overall.
  - Small- and medium-sized enterprises account for 50% of the overall tax gap in the UK .small[(HMRC, 2015)], 47% of individual income in the US, and 14.9% (self-employment income) in Denmark.
- Admin data .small[Canada, UK, Brazil, Chile, China, Costa Rica, Ecuador, India, Pakistan, Rwanda, Tunisia, and Uganda.]
- Experiments (RCT): .small[ Uruguay (Bergolo et al., 2018), Colombia (Ortega &amp; Scartascini, 2018), Chile (Pomenranz, 2015), Ecuador (Carrillo et al., 2017)]
- RD and "bunching" analysis of kinks and notches: .small[Spain (Almunia and Lopez-Rodriguez, 2018); Ecuador (Carrillo et al., 2012)]
- Traces

.footer[[&amp;#9664; Back-Motivation](#motivation)]
.footer[[&amp;#9664; Back-Relevance](#lit)]

---
name: traces
### Traces of true income

- Seminal paper Pissarides and Weber (1989): 
  - Food consumption is a function of income and other characteristics, but not of kind of income, salary versus self-employment income
  - A higher ratio of food purchases to reported income of the self-employed vs employees in the UK implies the self-employed understate their income
- Most recent studies focus on individual income .small[
  - Bank's credit multipliers for employees and self-employed in Greece (Artavanis, 2016); Public vs private sector employees in Estonia (Paulus, 2015); for Canada (Dunbar and Fu, 2015)]
- Trace's estimates are considered as lower bounds of evasion (by the self-employed)
  

.footer[[&amp;#9664; Back](#lit)]

---
name: firms-evasion
### Firms' tax evasion

- Import/export tariffs
  - Mislabelling .small[(between China and Hong Kong: Feisman and Wei, 2004)] 
- Payroll taxes
  - Incentive to underreport labor and wages .small[(Mexico: Kumler et al., 2013)]
- Value added tax (VAT)
  - Incentive to underreport sales/overreport costs .small[(Chile: Pomeranz, 2015; for Brazil: Naritomi, 2016)]
- Profit tax (Corporate income tax)
  - Most recent work focuses on revenue underreporting .small[(Ecuador: Carrillo et al., 2017; US: Slemrod et at., 2017; Slemrod, 2019; Pomeranz and Vila-Belda, 2019)], 
  - Few look into **cost overreporting** .small[(Carrillo et al., 2022)].

.footer[[&amp;#9664; Back](#lit)]

---
name: cost-over
### Cost overreporting through fake invoices by ghost firms

*Carrillo, Donaldson, Pomeranz, and Singhal (2022) NBER Working Paper*

- Internationally prevalent
  - OECD (2017) acknowledges fake invoicing pervasiveness.
  - Mexico (Tax revenue loss 0.3% Mexico's GDP), Colombia (0.2%), Chile (0.2%), Poland (5.6%); Asia: South Korea and China; and Africa: Kenya and Rwanda. 
- "Extremely sparse"
  - Needed data is rare
  - Pakistan: VAT rates reduced to zero, ghost firms decreased .small[(Waseem, 2020)]; ML algorithm to detect ghost firms .small[(Mittal et al., 2018)]


---
name: carrillo
### Carrillo et al. (2022)

- Authors exploit **transaction-level data** from Ecuador and a **list of ghost firms** —pre-identified by the tax authority— to document new facts about the use of fake invoices to evade taxes. 
- Data covers the period before and after **government intervention** —emails challenging ghost clients misreporting.
- Ghost transactions are **widespread** and **quantitatively large** 
  - Not limited to small, semi-formal firms; **Larger firms** are more likely to engage in ghost transactions
  - Annual ghost purchases reached 14.1% of the value of firms' total purchases. 4.7% of potential clients engaged in ghost transactions.

.footer[[&amp;#9664; Back](#over-r)]

---
name: evidence
### Empirical evidence

**Carrillo et al. (2022)**

- Firms at the top of the size distribution don't overreport inputs .small[
  - Share of ghost deductions increases throughout much of the size distribution, *except at the very top* —very large corporations might have stronger incentives to avoid illegal behavior or they can use more sophisticated avenues of tax avoidance that do not require evasion using fake receipts (Bustos et al., 2022)]
- Timing of the evasion decision .small[
  - Ghost transactions are clustered towards the end of the tax year
- Consistent with firms assessing their annual revenues at the end of the year and then utilizing ghost transactions to achieve a target reported profit level or rate for tax purposes]
- Cost overreporting mainly on non-labor costs (intermediates) .small[
  - Adjusting firms reduced most strongly non-labor costs: domestic purchases, other production costs, and imports]

.footer[[&amp;#9664; Back](#id-strat)]


---
### In the context of my approach

- No economic activity behind overreporting .small[
  - Ghost transactions bunch at round numbers
- Ghost transactions bunch below the financial system payment threshold]
- Monotonic relation between size and tax evasion .small[
  - The probability of engaging in cost overreporting through ghost firms increases monotonically in firm revenue.]
- No underreporting in firm-to-firm sales .small[
  - There was no offsetting behavior as in revenue misreporting studies]


---
name: id-sources
### Possible sources of identification

From theory
1. Thresholds: changes in audit probability, penalties, or tax rates after passing a thresholds
2. Unexpected changes in input prices: productivity increments to offset raises in prices will follow the Markov assumption and thus take longer than just misreporting because of higher incentives to evade taxes
3. Timing of the misreporting decision: after realization of productivity and true inputs are chosen


---
### Possible sources of identification

From data
1. Firms at the top of the size distribution do not overreport inputs
2. Firms' characteristics correlated with tax evasion: 
  1. Correlated with productivity: Revenue, market shares .small[(Carrillo et al., 2022)], firm's age .small[(Zumaya et at., 2021)], Owner's income .small[(Carrillo et al., 2022)], costs and assets ratio .small[(Gonzales and Velasques, 2013)]
  2. Uncorrelated with productivity:  Results of previous audits .small[(Gonzalez and Velasquez, 2013)]

.footer[[&amp;#9664; Back](#id-strat)]

---
layout: false
name: hu-sch
### Hu, Schennach, and Shiu (2021)

`\begin{align}
  Y&amp;=m_0(X^*)+\eta \\
  X&amp;=X^*+\varepsilon \\
  \varepsilon &amp;\not\perp X^*
\end{align}`

1. `\(m_0\)` monotone function
2. `\(\mathbb{E}[\eta| X^*]=0\)`, `\(\eta\perp\varepsilon\)`
3. `\(f(y|x^*,x)=f(y|x^*)\)`
4. `\(G[f(x|x^*)]=x^*\)`

In my case, `\(m_0=\beta \ln X^* + g^{-1}(X^*)\)` and `\(G[\cdot]=\inf\{\nu:\int_{0}^\nu f(x|x^*)dx \ge 0.9\}\)`

.footer[[&amp;#9664; Back](#future)]


---
layout: true

### MC Simulations
---
name: mc-sim

**The model**

- Price-taking firms maximize after-tax profits given input prices, taxes, optimal inputs, and size
- The cost function of the tax-evasion decision `\(C(\varepsilon\le0)=0\)` `\(\frac{\partial C}{\partial \varepsilon}&gt;0\)` `\(\frac{\partial C}{\partial s}&lt;0\)`
- Size is correlated with productivity

---

Rearranging

`\begin{align*}
    \max_{\varepsilon^X \in [0,\infty)} (1-\tau)(Py-\rho x^*)+\rho\tau \varepsilon^X - p(\varepsilon^X)[\rho\tau\varepsilon^X-\kappa] \\  
\end{align*}`

`\begin{equation*}
  V^E=\max_{\varepsilon^X_{it}} (1-\tau)\left(P_t \mathbb{E}[y_{it}] - \rho x_{it}^*\right)+\rho_t\tau \varepsilon^X_{it}-C(\varepsilon^X_{it}, s_{it})
\end{equation*}`


---

Functional forms in simulations

`\begin{align*}
  C(\varepsilon^X_{it}, s_{it})&amp;=\mathbf 1 (\varepsilon^X_{it}\ge0)\left[\alpha_0\varepsilon_{it}s^{-1}_{it}+\alpha_1^{\varepsilon_{it}}-1 \right]
\end{align*}`

Optimal overreporting

`\begin{align}
  \varepsilon^X_{it}&amp;=  \frac{\ln\left(\tau\rho_t-\alpha_0 s_{it}^{-1}\right)-\ln\ln\alpha_1}{\ln\alpha_1}
\end{align}`


---

- Optimal inputs are chosen given productivity, prices, and the production function

`\begin{equation*}
  V^T=\max_{x_{it}} P_t\mathbb{E}[ x_{it}^\beta e^{\omega_{it}+\varepsilon_{it}}]-\rho_t x_{it}
\end{equation*}`

- Optimal input choice is `\(x_{it}^*=\left(\frac{\beta P_t e^{\omega_{it}}}{\rho_t}\right)^{\frac{1}{1-\beta}}\)`. 
- Output is `\(y_{it}=x^{*\beta}_{it}e^{\omega_{it}+\varepsilon_{it}}\)`


---

- `\(n=1,000\)` firms and 4 periods `\(t=\{1,2,3,4\}\)` 
- `\(\varepsilon^Y_{it}\sim N(0,1)\)`
- `\(\omega_{it}=\delta\omega_{it}+\eta_{it}\)`; `\(\eta_{it}\sim N(0,1)\)` and 
- `\(s_{it}=40\frac{1}{1+e^{\omega_{it}}}+ U[1,10]\)`
- `\(P_t\sim U[1.5,2]\)`, `\(\rho_t\sim U[0.5,1]\)`


---
layout: true
### Recovering production function parameters
---

1. OLS: `\(\ln y_{it} = \beta \ln x_{it} + \nu_{it}\)`
2. 2SIV: 1S `\(\ln x_{it} = \gamma \ln x_{it-1} + \upsilon_{it}\)`; 2S `\(\ln y_{it} =  \beta \ln \hat{x}_{it} + \nu_{it}\)`
3. ACF+: `\(\mathbb{E}[\eta_{it}|Z_{it}]\)` with `\(Z_{it}=\{1,\ln x_{it-2}, 2\ln x_{it-2}\}\)`
4. GNR-
5. GNR+

---

| Parameter        | Value |
|:----------------:|------:|
|\\(\\beta\\)      | 0.40   |
|\\(\\delta\\)     | 0.80   |
|\\(\\alpha_0\\)   | 0.14  |
|\\(\\alpha_1\\)   | 1.05  |
|\\(\\tau\\)       | 0.30  |


---

&lt;table class=" lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
&lt;caption&gt;100 repetitions, 95% confidence intervals&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"&gt;&lt;div style="border-bottom: 1px solid #111111; margin-bottom: -1px; "&gt;\(\beta\)&lt;/div&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"&gt;&lt;div style="border-bottom: 1px solid #111111; margin-bottom: -1px; "&gt;\(\delta\)&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Model &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; LCI &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; UCI &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; LCI &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; UCI &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; OLS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.30 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.23 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; IV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.63 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.85 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.29 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ACF+ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.46 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.36 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.99 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.03 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; GNR- &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.37 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.64 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.54 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; GNR+ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.37 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.69 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.67 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.72 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
layout: false
name: prd-bias
### Bias of production function parameter

OLS: `\(\mathbb{E}[\ln Y_{it}|x_{it}]=\mathbb{E}[\beta \ln(X^*_{it}+\varepsilon^X_{it})|x_{it}]+\mathbb{E}[\omega_{it}|x_{it}]\)`

IV: `\(\mathbb{E}[\ln Y_{it}|x_{it-1}]=\mathbb{E}[\beta \ln(X^*_{it}+\varepsilon^X_{it})|x_{it-1}]\)`

ACF: (1st stage) `\(\mathbb{E}[\ln Y_{it}]=\mathbb{E}[\beta\ln(X^*_{it})+ g^{-1}(X^*_{it})]\)`

GNR: (1st stage) `\(\mathbb{E}[\ln\left(\frac{\rho_t (X^*_{it}+\varepsilon^X_{it})}{P_{t}Y_{it}}\right)]=\ln\beta\)`

.footer[[&amp;#9664; Back](#bias)]

---
name: data-slide

### Data

- Mexico
  - Tax records: SAT-UNAM public study data requested through *INAI* .small[(National Institute of Information Access)]
  - Firm-level data: Remote access or on-site .small[(Census, Annual, and Monthly Surveys)] 
- Ecuador
  - Tax records: Carrillo et al. (2022) data 
  - Firm-level data: EMM (*Encuesta Manufactura y Minería* 2007-2010, 2012; *Encuesta Manufactura, Minería y Construcción* 2013-2015); ENSEM (*Encuesta Estructural Empresarial* 2017-2019); EE (*Encuesta Exhaustiva* 2011)

---

### Data

- Chile:
  - Tax records: Gonzalez\* and Velasquez (2013) data from *Servicio de Impuestos Internos*. Not likely to get access
  - Firm-level data: Good
- Colombia:
  - Tax records: Not available. 
  - Supersociedades: Detailed financial data (Profits/losses, income per activity, income of operations, assets, debt, etc.)
  - Firm-level data: Good

Depending on similarities with Mexico and Ecuador, might estimate *bounds* for these two countries.

.footer[[&amp;#9664; Back](#data1)]

---
name: acf

**ACF+**

1st Stage

`\begin{align*}
  \ln Y_{it}&amp;=\beta\ln X^*_{it}+\beta\epsilon_{it} + \omega_{it} + \varepsilon^Y_{it} \\
  \mathbb{E}[\ln Y_{it}|S_{it}&gt;s]&amp;=\mathbb{E}[\beta\ln(X^*_{it})+\omega_{it}|S_{it}&gt;s] &amp;\text{(A-1)}\\
  &amp;=\mathbb{E}[\beta\ln(X^*_{it})+ g^{-1}(X^*_{it})|S_{it}&gt;s]\\
  &amp;=\mathbb{E}[\varphi_X(X^*_{it})|S_{it}&gt;s]
\end{align*}`

If selection on `\(S=\{K,L,Y,M\}\)`, i.e., `\(\mathbb{E}[\omega_{it}|S_{it}&gt;s]\not=\mathbb{E}[\omega_{it}]\)`, then 2nd stage might not work.

---

2nd Stage

Markov assumption on productivity implies `\(\omega_{it}=\delta\omega_{it-1}+\eta_{it}\)`. Then,

`\begin{align}
  \varphi_X(X_{it}) - &amp;\delta\varphi_X(X_{it-1}) \\
  &amp;= \beta\ln(X_{it}) + \omega_{it}- \delta\left(\beta\ln(X_{it}) + \omega_{it} \right)\\
  &amp;= \beta(\ln X_{it}-\delta \ln X_{it-1})+ \omega_{it}-\delta\omega_{it-1}\\
  &amp;= \beta(\ln X^*_{it}-\delta \ln X^*_{it-1})+ \beta(\epsilon_{it}-\delta \epsilon_{it-1}) + \eta_{it}
\end{align}`

`\begin{align}
  \mathbb{E}[\beta(\epsilon_{it}-\delta \epsilon_{it-1})+\eta_{it}|Z_{it}]=0
\end{align}`

I recover `\(\beta\)` and `\(\delta\)` with GMM

.footer[[&amp;#9664; Back](#gnr)]


---
name: gnr-iv
### Using instruments

Finally, for tax-evasion

`\begin{align}
  \mathbb{E}[\mathcal E_{it}|Z_{it}]&amp;=\mathbb{E}[\epsilon_{it}-\varepsilon^Y_{it}|Z_{it}]\\
  &amp;=\mathbb{E}[\epsilon_{it}|Z_{it}]
\end{align}`

`\(Z_{it}=\{P_t,\rho_t,\omega_{it},Y_{it-1},X_{it-1},\mathcal X_{it-1}, \mathcal W_{it-1}\}\)`

`\(Z_{it}\cup X_{it}\)` if (A-2) holds

---

Alternatively, I can work with true inputs `\(X^*\)`

`\begin{align}
  \mathbb{E}[\mathcal X_{it}|Z_{it}]&amp;=\mathbb{E}[\ln X^*_{it}+\varepsilon^Y_{it}|Z_{it}]\\
  &amp;=\mathbb{E}[\ln X^*_{it}|Z_{it}]
\end{align}`

`\(Z_{it}=\{P_t,\rho_t,\omega_{it},Y_{it-1},X_{it-1},\mathcal X_{it-1}, \mathcal W_{it-1}\}\)`

`\(Z_{it}\cup X_{it}\)` if (A-2) holds

.footer[[&amp;#9664; Back](#deconv)]


---
name: sec-mom
### Second moments

Also, `\(Var[\ln Y_{it}|t]=Var[\beta \ln X^* + \omega|t]+Var[\varepsilon^Y_{it}]\)`

From the FOC of the firm's profit-maximization problem, we know `\(Var[\omega_{it}|t]=(1-\beta)^2Var[\ln X^*|t]\)`


---

Also, note that by normalizing `\(\mathbb{E}[\omega_{it}]=0\)`

`\begin{align}
  Cov(\ln X^*_{it},\omega_{it}|t)&amp;= \mathbb{E}[\ln X^*_{it}\omega_{it}|t]-\mathbb{E}[\ln X^*_{it}|t]\mathbb{E}[\omega_{it}|t] \\
  &amp;=\mathbb{E}[\ln X^*_{it}\omega_{it}|t]
\end{align}`

`\begin{align}
  \mathbb{E}[\ln X^*_{it}\omega_{it}|t]&amp;=\mathbb{E}\left[(1-\beta)^{-1}
    \left(
      \omega_{it}+\ln\left(\beta P_t\rho_t^{-1}\right)
      \right)
        \omega_{it}
      |t\right]\\
  &amp;= (1-\beta)^{-1}\mathbb{E}\left[
    \omega_{it}\omega_{it}+\omega_{it}\ln\left(\beta P_t\rho_t^{-1}\right)
    |t\right]\\
  &amp;= (1-\beta)^{-1}\left(\mathbb{E}[\omega_{it}\omega_{it}|t]
    +\ln\left(\beta P_t\rho_t^{-1}\right)\mathbb{E}[\omega_{it}|t]
  \right)\\
  &amp;= (1-\beta)^{-1}\mathbb{E}[\omega_{it}\omega_{it}|t]\\
  &amp;=(1-\beta)^{-1}Var[\omega_{it}|t]
\end{align}`

---

Using these results


`\begin{align}
  Var[\beta&amp;\ln X^*_{it}+\omega_{it}|t] \\
  &amp;=\beta^2 Var[\ln X^*_{it}|t]+Var[\omega_{it}|t]+2\beta Cov[\ln X^*_{it},\omega_{it}|t]\\
  &amp;=\beta^2 (1-\beta)^{-2} Var[\omega_{it}|t]+Var[\omega_{it}|t]+2\beta(1-\beta)^{-1}Var[\omega_{it}|t]\\
  &amp;=(1-\beta)^{-2}Var[\omega_{it}|t]
\end{align}`

---

Then, the variance of `\(\omega_{it}\)` and `\(X^*_{it}\)` are identified 

`\(Var[\ln Y_{it}|t]-Var[\varepsilon^Y_{it}]=(1-\beta)^{-2}Var[\omega_{it}|t]\)`

`\(Var[\ln Y_{it}|t]-Var[\varepsilon^Y_{it}]=Var[\ln X^*_{it}|t]\)`

Likewise, the mean of `\(X^*_{it}\)` is 

`\(\mathbb{E}[\mathcal{X}_{it}]=\mathbb{E}[\ln X^*_{it}]+\mathbb{E}[\varepsilon^Y_{it}]=\mathbb{E}[\ln X^*_{it}]\)`

.footer[[&amp;#9664; Back](#deconv)]

---
layout: true
name: model
### A model of tax evasion by input overreporting
---

- Firms choose input overreporting `\(\varepsilon^X\)`,

- given their true profits `\(P\mathbb{E}[y]-\rho x^*\)` and tax rate `\(\tau\)`.

- Firms get caught with probability `\(p(\varepsilon^X)\)` and are punished with cost `\(\kappa\)`

- With probability `\(1-p(\varepsilon^X)\)`, firms gain `\(\rho\tau\varepsilon^X\)`


`\begin{align*}
    \max_{\varepsilon^X \in [0,\infty)} (1-\tau)(P\mathbb{E}[y]-\rho x^*)+[1-p(\varepsilon^X)]\rho\tau\varepsilon^X - p(\varepsilon^X)\kappa \\  
\end{align*}`


---
layout: false
### Properties of tax evasion

`\begin{equation*}
    \varepsilon^X=\frac{1-p(\varepsilon^X)}{p'(\varepsilon^X)}-\frac{\kappa}{\rho\tau}
\end{equation*}`

- Tax evasion `\(\varepsilon^X\)` decreases if the probability of getting caught `\(p(\varepsilon^X)\)` or punishment `\(\kappa\)` increase
- increases if input prices `\(\rho\)` or the tax rate `\(\tau\)` increase
- properties (potentially) exploited in identification

---
layout: false
name: soc
### SOC of the tax evasion problem

`\begin{equation*}
  p''(\varepsilon^X)\ge -\frac{p'(\varepsilon^X)2\rho\tau}{\rho\tau\varepsilon^X+\kappa}
\end{equation*}`

Convexity, linearity, and lower bound for concavity.

For example, `\(p(\varepsilon)=p(C=1|\varepsilon)=1-e^{-\varepsilon}\)`
- `\(p(0)=0\)`, `\(p(\infty)=1\)`
- `\(p'=e^{-\varepsilon}\)`, `\(p''=-e^{-\varepsilon}\)`
- Equation above implies `\(\varepsilon+\frac{\kappa}{\rho\tau}\ge 2\)`

.footer[[&amp;#9664; Back](#foc)]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%/17",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
